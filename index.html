<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>欢乐都市夜</title>
	<script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<style>
	body {
		position: relative;
		min-height: 100%;
	}
	.header{
		height:170px;
		width:100%;
		position:fixed;
		top:0;
		}
	.main{
		width:100%;
		position:fixed;
		top:170px;
		height:auto;
		text-align: center;
		}
	.footer{
		height:150px;
		width:100%;
		position:fixed;
		bottom:0;
		text-align: center;
		}
	.footer p {
		text-align: center;
	}
	</style>
</head>
<body>
<div class="header">
	<img src="http://enjoynight.top:8800/enjoynight-web/137404_200801212013321.gif" alt="年华之树" style="max-width:100%;"/>
</div>
<div  class="main" class="autotype" id="autotype">
	<p>欢乐都市夜</p>
	<p>苏州交通广播</p>
	<p>FM 104.8</p>
	<p>每周六日</p>
	<p>19点30分到22点</p>
	<p></p>
	<p></p>
	<p></p>
	<p></p>
	<br>
</div>
<div class="footer">
	<p><a href="http://xn--fjq06xq0d7pqqu8b.cn:8800/enjoynight-web/about.html" title="关于阿欢">关于阿欢</a><span class="word">　丨　</span><a href="http://xn--fjq06xq0d7pqqu8b.cn:8800/enjoynight-web/getrecord.html">获取录音</a></p>
	<p><a href="http://xn--fjq06xq0d7pqqu8b.cn:8800/enjoynight-web/story/index.html">故事</a> 　　丨 　　片头 　　丨 　　节目回听</p>
	<audio controls autoplay loop>
		<source src="http://enjoynight.top:8800/nomattersoul.mp3" type="audio/mp3">
	</audio>
</div>

<script>
$.fn.autotype = function() {
    var $text = $(this);
    console.log('$text:', $text);
    var str = $text.html(); //返回被选 元素的内容
    console.log('str:', str);
    var index = 0;
    var x = $text.html('');
    console.log('x:', x);
    //$text.html()和$(this).html('')有区别
    var timer = setInterval(function() {
        //substr(index, 1) 方法在字符串中抽取从index下标开始的一个的字符
        var current = str.substr(index, 1);
        if (current == '<') {
            //indexOf() 方法返回">"在字符串中首次出现的位置。
            index = str.indexOf('>', index) + 1;
        } else {
            index++;
        }
        //console.log(["0到index下标下的字符",str.substring(0, index)],["符号",index & 1 ? '_': '']);
        //substring() 方法用于提取字符串中介于两个指定下标之间的字符
        $text.html(str.substring(0, index) + (index & 1 ? '_' : ''));
        index > $text.html().length + 10 && (index = 0);
        /*if(index >= str.length){
        	clearInterval(timer);
        }*/
    }, 300);
};
$("#autotype").autotype();
</script>
</body>
</html>
